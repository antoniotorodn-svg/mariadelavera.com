---
import VideoEmbed from './VideoEmbed.astro';

interface Props {
  badge?: string;
  title: string;
  titleAccent?: string;
  subtitle: string;
  ctaPrimary?: { text: string; href: string };
  ctaSecondary?: { text: string; href: string };
  proofItems?: string[];
  showImage?: boolean;
  showVideo?: boolean;
}

const {
  badge,
  title,
  titleAccent,
  subtitle,
  ctaPrimary = { text: "Reservar cita", href: "#reservar" },
  ctaSecondary = { text: "WhatsApp", href: "https://wa.link/8y1ykx" },
  proofItems = [
    "5.0 valoraci√≥n Google",
    "Colegiada MAD01182",
    "+700 pacientes atendidos"
  ],
  showImage = false,
  showVideo = true
} = Astro.props;

let titleParts: string[] = [];
if (titleAccent && title.includes(titleAccent)) {
  const parts = title.split(titleAccent);
  titleParts = [parts[0], titleAccent, parts[1]];
} else {
  titleParts = [title];
}
---

<section class="hero">
  <div class="hero__bg-decoration"></div>
  <div class="container">
    <div class="hero__grid">
      <div class="hero__content">
        {badge && (
          <div class="hero__badge">
            {badge}
          </div>
        )}

        <h1 class="hero__title">
          {titleParts.length === 3 ? (
            <>
              {titleParts[0]}
              <span class="hero__title-accent">{titleParts[1]}</span>
              {titleParts[2]}
            </>
          ) : (
            title
          )}
        </h1>

        <p class="hero__subtitle">{subtitle}</p>

        <div class="hero__ctas">
          <a href={ctaPrimary.href} class="btn btn--primary btn--large">
            {ctaPrimary.text}
          </a>
          <a href={ctaSecondary.href} class="btn btn--whatsapp btn--large" target="_blank" rel="noopener">
            üí¨ {ctaSecondary.text}
          </a>
        </div>

        {proofItems && proofItems.length > 0 && (
          <div class="hero__proof">
            {proofItems.map(item => (
              <span class="hero__proof-item">
                <span class="hero__proof-check">‚úì</span>
                {item}
              </span>
            ))}
          </div>
        )}
      </div>

      {showVideo && (
        <div class="hero__video">
          <VideoEmbed compact={true} />
        </div>
      )}

      {showImage && !showVideo && (
        <div class="hero__image">
          <div class="hero__image-placeholder">
            <span class="hero__emoji">üë©‚Äç‚öïÔ∏è</span>
            <p class="hero__placeholder-text">Foto de Mar√≠a<br>(subir imagen)</p>
          </div>
        </div>
      )}
    </div>
  </div>
</section>

<style>
  .hero {
    padding: var(--spacing-3xl) 0 var(--spacing-2xl);
    background: var(--gradient-warm);
    position: relative;
    overflow: hidden;
  }

  .hero__bg-decoration {
    position: absolute;
    top: -50%;
    right: -20%;
    width: 600px;
    height: 600px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(124, 182, 157, 0.08) 0%, transparent 70%);
    pointer-events: none;
  }

  .hero__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-xl);
    align-items: center;
    position: relative;
    z-index: 1;
  }

  @media (min-width: 1024px) {
    .hero__grid {
      grid-template-columns: 1.2fr 0.8fr;
    }
  }

  .hero__content {
    max-width: 600px;
  }

  .hero__badge {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: 0.5rem 1.25rem;
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(8px);
    color: var(--mentaris-green-dark);
    border-radius: var(--radius-full);
    font-size: 0.875rem;
    font-weight: 600;
    font-family: var(--font-body);
    margin-bottom: var(--spacing-lg);
    border: 1px solid rgba(124, 182, 157, 0.2);
  }

  .hero__title {
    font-family: var(--font-display);
    font-size: 2.75rem;
    font-weight: 400;
    line-height: 1.1;
    margin-bottom: var(--spacing-md);
    color: var(--color-text-primary);
  }

  @media (min-width: 768px) {
    .hero__title {
      font-size: 3.5rem;
    }
  }

  .hero__title-accent {
    font-style: italic;
    color: var(--color-trust);
  }

  .hero__subtitle {
    font-size: 1.0625rem;
    line-height: 1.7;
    color: var(--color-text-secondary);
    margin-bottom: var(--spacing-lg);
  }

  @media (min-width: 768px) {
    .hero__subtitle {
      font-size: 1.125rem;
    }
  }

  .hero__ctas {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xl);
  }

  .btn--large {
    padding: 1rem 2rem;
    font-size: 1rem;
  }

  .hero__proof {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    padding-top: var(--spacing-lg);
    border-top: 1px solid rgba(74, 139, 111, 0.12);
  }

  .hero__proof-item {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    font-weight: 500;
    font-family: var(--font-body);
  }

  .hero__proof-check {
    color: var(--mentaris-green-dark);
    font-weight: 700;
    font-size: 0.8rem;
  }

  .hero__video {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .hero__image {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .hero__image-placeholder {
    width: 100%;
    max-width: 380px;
    aspect-ratio: 1;
    background: linear-gradient(135deg, rgba(255,255,255,0.8) 0%, var(--mentaris-cream-light) 100%);
    border-radius: var(--radius-xl);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-lg);
    border: 1px solid rgba(124, 182, 157, 0.15);
  }

  .hero__emoji {
    font-size: 5rem;
    margin-bottom: var(--spacing-md);
  }

  .hero__placeholder-text {
    color: var(--color-text-secondary);
    font-size: 0.9rem;
    text-align: center;
    font-style: italic;
  }
</style>
