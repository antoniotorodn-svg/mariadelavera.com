---
import CalendlyEmbed from './CalendlyEmbed.astro';
---

<section class="section" id="reservar">
  <div class="container">
    <div class="calendly-header">
      <h2 class="text-center">Reserva tu cita</h2>
      <p class="text-center calendly-subtitle">
        Elige la modalidad que prefieras y selecciona el d√≠a y hora que mejor te convenga.
      </p>
    </div>

    <div class="tabs">
      <div class="tabs__buttons">
        <button class="tabs__button tabs__button--active" data-tab="presencial">
          <span class="tabs__button-icon">üìç</span>
          Presencial
        </button>
        <button class="tabs__button" data-tab="online">
          <span class="tabs__button-icon">üíª</span>
          Online
        </button>
      </div>

      <div class="tabs__content">
        <div class="tabs__panel tabs__panel--active" id="tab-presencial">
          <CalendlyEmbed type="presencial" />
        </div>

        <div class="tabs__panel" id="tab-online">
          <CalendlyEmbed type="online" />
        </div>
      </div>
    </div>

    <p class="text-center" style="margin-top: var(--spacing-lg); color: var(--color-text-secondary);">
      ¬øVienen en pareja? <a href="https://calendly.com/nutricionista-mariadelavera/primera-consulta-parejas" target="_blank" rel="noopener" style="color: var(--color-trust); font-weight: 600;">Reserva consulta para parejas aqu√≠</a>
    </p>
  </div>
</section>

<style>
  .calendly-header {
    margin-bottom: var(--spacing-xl);
  }

  .calendly-subtitle {
    color: var(--color-text-secondary);
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }

  .tabs__buttons {
    display: flex;
    gap: 0.5rem;
    margin-bottom: var(--spacing-lg);
    justify-content: center;
    flex-wrap: wrap;
    background: var(--color-bg-secondary);
    border-radius: var(--radius-full);
    padding: 0.375rem;
    max-width: 320px;
    margin-left: auto;
    margin-right: auto;
  }

  .tabs__button {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.375rem;
    padding: 0.75rem 1.5rem;
    background-color: transparent;
    border: none;
    border-radius: var(--radius-full);
    font-family: var(--font-body);
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: all var(--transition-base);
  }

  .tabs__button:hover {
    color: var(--color-text-primary);
  }

  .tabs__button--active {
    background: var(--color-white);
    color: var(--mentaris-green-dark);
    box-shadow: var(--shadow-sm);
  }

  .tabs__button-icon {
    font-size: 1rem;
  }

  .tabs__panel {
    display: none;
  }

  .tabs__panel--active {
    display: block;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabButtons = document.querySelectorAll('.tabs__button');
    const tabPanels = document.querySelectorAll('.tabs__panel');

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');

        tabButtons.forEach(btn => btn.classList.remove('tabs__button--active'));
        tabPanels.forEach(panel => panel.classList.remove('tabs__panel--active'));

        button.classList.add('tabs__button--active');
        document.getElementById(`tab-${tabId}`)?.classList.add('tabs__panel--active');
      });
    });
  });
</script>
