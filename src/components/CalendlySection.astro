---
import CalendlyEmbed from './CalendlyEmbed.astro';
---

<section class="section" id="reservar">
  <div class="container">
    <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">Reserva tu cita</h2>

    <div class="tabs">
      <div class="tabs__buttons">
        <button class="tabs__button tabs__button--active" data-tab="presencial">
          ğŸ“ Presencial (Boadilla)
        </button>
        <button class="tabs__button" data-tab="online">
          ğŸ’» Online (Google Meet)
        </button>
      </div>

      <div class="tabs__content">
        <div class="tabs__panel tabs__panel--active" id="tab-presencial">
          <CalendlyEmbed type="presencial" />
        </div>

        <div class="tabs__panel" id="tab-online">
          <CalendlyEmbed type="online" />
        </div>
      </div>
    </div>

    <p class="text-center" style="margin-top: var(--spacing-lg); color: var(--color-text-secondary);">
      Â¿Vienen en pareja? <a href="https://calendly.com/nutricionista-mariadelavera/primera-consulta-parejas" target="_blank" rel="noopener" style="color: var(--color-trust); font-weight: 600;">Reserva consulta para parejas aqui</a>
    </p>
  </div>
</section>

<style>
  .tabs__buttons {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-lg);
    justify-content: center;
    flex-wrap: wrap;
  }

  .tabs__button {
    padding: 0.875rem 1.75rem;
    background-color: var(--color-white);
    border: 2px solid var(--color-bg-secondary);
    border-radius: var(--radius-full);
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary);
    cursor: pointer;
    transition: var(--transition-base);
  }

  .tabs__button:hover {
    border-color: var(--color-trust);
  }

  .tabs__button--active {
    background-color: var(--color-trust);
    color: var(--color-white);
    border-color: var(--color-trust);
  }

  .tabs__panel {
    display: none;
  }

  .tabs__panel--active {
    display: block;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabButtons = document.querySelectorAll('.tabs__button');
    const tabPanels = document.querySelectorAll('.tabs__panel');

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');

        tabButtons.forEach(btn => btn.classList.remove('tabs__button--active'));
        tabPanels.forEach(panel => panel.classList.remove('tabs__panel--active'));

        button.classList.add('tabs__button--active');
        document.getElementById(`tab-${tabId}`)?.classList.add('tabs__panel--active');
      });
    });
  });
</script>
