---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import CTABox from '../components/CTABox.astro';
import BarrioTag from '../components/BarrioTag.astro';

import serviciosData from '../data/servicios.json';
import barriosData from '../data/barrios.json';

const servicio = serviciosData.find(s => s.slug === 'nutricion-clinica')!;
const barriosDestacados = barriosData.slice(0, 3);

const schema = {
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Nutrici√≥n cl√≠nica - Nutricionista Boadilla",
  "description": servicio.description,
  "provider": {
    "@type": "Dietitian",
    "name": "Mar√≠a De la Vera"
  },
  "areaServed": "Boadilla del Monte",
  "priceRange": "50‚Ç¨ - 140‚Ç¨"
};
---

<BaseLayout
  title={servicio.metaTitle}
  description={servicio.metaDescription}
  canonical={`/${servicio.slug}`}
  schema={schema}
>
  <Nav slot="nav" />

  <Hero
    badge={`${servicio.emoji} ${servicio.title}`}
    title={`${servicio.title} en Boadilla del Monte`}
    titleAccent="Boadilla del Monte"
    subtitle={servicio.description}
    showImage={false}
  />

  <section class="section section--alt">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">¬øQu√© incluye el servicio?</h2>
      <div class="benefits-grid">
        {servicio.benefits.map(benefit => (
          <div class="benefit-item">
            <span class="benefit-icon">‚úì</span>
            <p>{benefit}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">¬øPara qui√©n es este servicio?</h2>
      <div class="grid grid--3" style="max-width: 900px; margin: 0 auto;">
        {servicio.forWho.map(item => (
          <div class="card" style="text-align: center;">
            <div style="font-size: 2.5rem; margin-bottom: var(--spacing-md);">ü©∫</div>
            <p style="color: var(--color-text-primary); font-weight: 500;">{item}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="section section--alt">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">¬øC√≥mo funciona?</h2>
      <div class="grid grid--3">
        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">1Ô∏è‚É£</div>
          <h3>Valoraci√≥n cl√≠nica</h3>
          <p style="color: var(--color-text-secondary);">
            An√°lisis de tu patolog√≠a, anal√≠ticas y tratamiento m√©dico actual. <strong>50‚Ç¨</strong>
          </p>
        </div>
        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">2Ô∏è‚É£</div>
          <h3>Plan terap√©utico</h3>
          <p style="color: var(--color-text-secondary);">
            Plan nutricional adaptado a tu condici√≥n m√©dica y objetivos de salud.
          </p>
        </div>
        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">3Ô∏è‚É£</div>
          <h3>Control m√©dico</h3>
          <p style="color: var(--color-text-secondary);">
            Seguimiento y ajustes seg√∫n evoluci√≥n de anal√≠ticas. <strong>40‚Ç¨/revisi√≥n</strong>
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">Zonas de Boadilla donde atiendo</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        Consulta presencial en el Centro M√©dico Arboleda, accesible desde toda Boadilla del Monte.
      </p>
      <div class="barrios-grid">
        {barriosDestacados.map(barrio => (
          <BarrioTag name={barrio.name} href={`/${barrio.slug}`} />
        ))}
        <BarrioTag name="Ver todas las zonas" href="/#barrios" />
      </div>
    </div>
  </section>

  <CTABox
    title="Mejora tu salud con nutrici√≥n cl√≠nica"
    description="Reserva tu primera consulta y controla tu patolog√≠a con un plan nutricional m√©dico personalizado."
    ctaText="Reservar consulta"
    ctaHref="/reservar"
    variant="trust"
  />

  <Footer slot="footer" />
</BaseLayout>

<style>
  .benefits-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
    max-width: 800px;
    margin: 0 auto;
  }

  .benefit-item {
    display: flex;
    gap: var(--spacing-md);
    align-items: flex-start;
    background-color: var(--color-white);
    padding: var(--spacing-lg);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
  }

  .benefit-icon {
    font-size: 1.5rem;
    color: var(--color-trust);
    flex-shrink: 0;
  }

  .benefit-item p {
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.6;
  }

  .barrios-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-sm);
  }
</style>
