---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import CTABox from '../components/CTABox.astro';
import BarrioTag from '../components/BarrioTag.astro';
import Breadcrumb from '../components/Breadcrumb.astro';
import RelatedServices from '../components/RelatedServices.astro';
import CalendlySection from '../components/CalendlySection.astro';

import serviciosData from '../data/servicios.json';
import barriosData from '../data/barrios.json';

const servicio = serviciosData.find(s => s.slug === 'nutricion-deportiva')!;
const barriosDestacados = [barriosData[1], barriosData[2], barriosData[4]]; // Prado Espino, Olivar, Las Lomas

const schema = {
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Nutrici√≥n deportiva - Nutricionista Boadilla",
  "description": servicio.description,
  "provider": {
    "@type": "Dietitian",
    "name": "Mar√≠a De la Vera"
  },
  "areaServed": "Boadilla del Monte",
  "priceRange": "50‚Ç¨ - 140‚Ç¨"
};
---

<BaseLayout
  title={servicio.metaTitle}
  description={servicio.metaDescription}
  canonical={`/${servicio.slug}`}
  schema={schema}
>
  <Nav slot="nav" />

  <Breadcrumb items={[
    { label: 'Inicio', href: '/' },
    { label: 'Servicios', href: '/#servicios' },
    { label: servicio.title }
  ]} />

  <Hero
    title={`${servicio.title} en Boadilla del Monte`}
    description={servicio.description}
    location="Boadilla del Monte"
    showVideo={true}
  />

  <section class="section section--alt">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">¬øQu√© incluye el servicio?</h2>
      <div class="benefits-grid">
        {servicio.benefits.map(benefit => (
          <div class="benefit-item">
            <span class="benefit-icon">‚úì</span>
            <p>{benefit}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">¬øPara qui√©n es este servicio?</h2>
      <div class="grid grid--3" style="max-width: 900px; margin: 0 auto;">
        {servicio.forWho.map(item => (
          <div class="card" style="text-align: center;">
            <div style="font-size: 2.5rem; margin-bottom: var(--spacing-md);">üèÉ</div>
            <p style="color: var(--color-text-primary); font-weight: 500;">{item}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="section section--alt">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">¬øC√≥mo funciona?</h2>
      <div class="grid grid--3">
        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">1Ô∏è‚É£</div>
          <h3>Primera consulta</h3>
          <p style="color: var(--color-text-secondary);">
            Analizamos tu deporte, entrenamientos y objetivos espec√≠ficos. <strong>50‚Ç¨</strong>
          </p>
        </div>
        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">2Ô∏è‚É£</div>
          <h3>Plan deportivo</h3>
          <p style="color: var(--color-text-secondary);">
            Plan nutricional adaptado a tus entrenamientos y competiciones.
          </p>
        </div>
        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">3Ô∏è‚É£</div>
          <h3>Optimizaci√≥n</h3>
          <p style="color: var(--color-text-secondary);">
            Ajustes cada 21 d√≠as seg√∫n tu evoluci√≥n y rendimiento. <strong>40‚Ç¨/revisi√≥n</strong>
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">Zonas de Boadilla donde atiendo</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        Consulta presencial en el Centro M√©dico Arboleda, cerca del Parque Forestal ideal para runners.
      </p>
      <div class="barrios-grid">
        {barriosDestacados.map(barrio => (
          <BarrioTag name={barrio.name} href={`/${barrio.slug}`} />
        ))}
        <BarrioTag name="Ver todas las zonas" href="/#barrios" />
      </div>
    </div>
  </section>

  <RelatedServices
    currentServiceId="nutricion-deportiva"
    relatedIds={["perdida-de-peso", "salud-digestiva"]}
  />

  <!-- Calendario de reservas -->
  <CalendlySection />

  <CTABox
    title="Mejora tu rendimiento deportivo"
    description="Reserva tu primera consulta y lleva tu entrenamiento al siguiente nivel con nutrici√≥n profesional."
    ctaText="Reservar consulta deportiva"
    ctaHref="#reservar"
    variant="trust"
  />

  <Footer slot="footer" />
</BaseLayout>

<style>
  .benefits-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
    max-width: 800px;
    margin: 0 auto;
  }

  .benefit-item {
    display: flex;
    gap: var(--spacing-md);
    align-items: flex-start;
    background-color: var(--color-white);
    padding: var(--spacing-lg);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
  }

  .benefit-icon {
    font-size: 1.5rem;
    color: #1a1a1a;
    flex-shrink: 0;
  }

  .benefit-item p {
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.6;
  }

  .barrios-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-sm);
  }
</style>
