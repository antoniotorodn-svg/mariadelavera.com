---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import TrustStrip from '../components/TrustStrip.astro';
import ServiceCard from '../components/ServiceCard.astro';
import TestimonialCard from '../components/TestimonialCard.astro';
import PricingCard from '../components/PricingCard.astro';
import BarrioTag from '../components/BarrioTag.astro';
import FAQAccordion from '../components/FAQAccordion.astro';
import CTABox from '../components/CTABox.astro';

import serviciosData from '../data/servicios.json';
import barriosData from '../data/barrios.json';

const faqItems = [
  {
    question: "¬øCu√°nto cuesta la primera consulta?",
    answer: "La primera consulta cuesta 50‚Ç¨ e incluye entrevista nutricional completa, an√°lisis de tu situaci√≥n actual, plan nutricional personalizado y material de apoyo. El plan lo recibes en 24-72h tras la consulta."
  },
  {
    question: "¬øCada cu√°nto tiempo son las revisiones?",
    answer: "Las revisiones se realizan cada 21 d√≠as. Este tiempo es ideal para evaluar progresos, resolver dudas, ajustar el plan si es necesario y mantenerte motivada. Cada revisi√≥n cuesta 40‚Ç¨."
  },
  {
    question: "¬øOfrecen consulta online o solo presencial?",
    answer: "Ofrezco ambas modalidades. Puedes elegir consulta presencial en el Centro M√©dico Arboleda (Boadilla del Monte) o consulta online por Google Meet. La calidad del servicio es la misma en ambos formatos."
  },
  {
    question: "¬øCu√°nto tiempo tarda en verse resultados?",
    answer: "Depende de tu objetivo y situaci√≥n inicial. En p√©rdida de peso, los primeros cambios suelen notarse en 2-3 semanas. En salud digestiva o patolog√≠as, puede variar. Lo importante es que trabajaremos juntos con un seguimiento constante cada 21 d√≠as."
  },
  {
    question: "¬øTengo que seguir una dieta estricta?",
    answer: "No. Mi enfoque se basa en educaci√≥n nutricional, no en dietas restrictivas. Crearemos un plan personalizado adaptado a tus gustos, estilo de vida y objetivos. Aprender√°s a comer bien de forma sostenible, sin prohibiciones extremas."
  },
  {
    question: "¬øHay garant√≠a de devoluci√≥n si no estoy satisfecho?",
    answer: "No ofrezco garant√≠a de devoluci√≥n, ya que cada persona es diferente y los resultados dependen del compromiso y adherencia al plan. Sin embargo, me comprometo a darte seguimiento cercano y ajustar el plan seg√∫n tus necesidades en cada revisi√≥n."
  }
];

const testimonials = [
  {
    quote: "Perd√≠ 12 kilos en 4 meses con Mar√≠a y lo mejor es que no he recuperado nada. Aprend√≠ a comer bien de verdad, sin pasar hambre. El seguimiento cada 21 d√≠as me mantuvo motivada todo el tiempo.",
    author: "Laura M.",
    service: "P√©rdida de peso",
    rating: 5
  },
  {
    quote: "Llevo a√±os con colon irritable y Mar√≠a me cambi√≥ la vida. Con el plan FODMAP personalizado y su seguimiento, reduje la hinchaz√≥n en un 80%. Ahora puedo comer sin miedo.",
    author: "Carlos R.",
    service: "Salud digestiva",
    rating: 5
  },
  {
    quote: "Como corredora de maratones, necesitaba mejorar mi alimentaci√≥n. Mar√≠a me hizo un plan espec√≠fico para entrenamientos y carreras. He mejorado mis marcas y mi recuperaci√≥n es mucho mejor.",
    author: "Ana G.",
    service: "Nutrici√≥n deportiva",
    rating: 5
  }
];

---

<BaseLayout
  title="Nutricionista en Boadilla del Monte | Mar√≠a De la Vera ¬∑ MAD01182"
  description="Nutricionista colegiada en Boadilla del Monte. P√©rdida de peso, nutrici√≥n deportiva, salud digestiva y hormonal. Primera consulta 50‚Ç¨. Reserva cita."
>
  <Nav slot="nav" />

  <!-- Hero -->
  <Hero
    badge="üìç Nutricionista en Boadilla del Monte"
    title="Tu nutricionista en Boadilla del Monte"
    titleAccent="Boadilla del Monte"
    subtitle="Alcanza tus objetivos con planes nutricionales 100% personalizados. Sin dietas milagro, sin efecto rebote. Colegiada MAD01182 con m√°s de 700 pacientes atendidos."
  />

  <!-- V√≠deo presentaci√≥n -->
  <section class="section section--alt" id="video">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">Con√≥ceme en 1 minuto</h2>
      <div class="video-wrapper">
        <iframe
          src="https://player.vimeo.com/video/1137833163?h=7317f4af36&title=0&byline=0&portrait=0"
          style="width:100%;height:100%;"
          frameborder="0"
          allow="autoplay; fullscreen; picture-in-picture"
          allowfullscreen
          title="Presentaci√≥n Mar√≠a De la Vera - Nutricionista"
        ></iframe>
      </div>
    </div>
  </section>

  <!-- Trust bar -->
  <TrustStrip />

  <!-- Servicios -->
  <section class="section" id="servicios">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">¬øEn qu√© puedo ayudarte?</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        Ofrezco planes nutricionales personalizados para diferentes objetivos de salud y bienestar.
      </p>

      <div class="grid grid--3">
        {serviciosData.map(servicio => (
          <ServiceCard
            emoji={servicio.emoji}
            title={servicio.title}
            description={servicio.shortDesc}
            href={`/${servicio.slug}`}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- C√≥mo funciona -->
  <section class="section section--alt" id="como-funciona">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-xl);">¬øC√≥mo funciona?</h2>

      <div class="grid grid--3">
        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">1Ô∏è‚É£</div>
          <h3>Primera consulta</h3>
          <p style="color: var(--color-text-secondary);">
            Entrevista nutricional completa, an√°lisis de tu situaci√≥n y objetivos. <strong>50‚Ç¨</strong>
          </p>
        </div>

        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">2Ô∏è‚É£</div>
          <h3>Recibes tu plan</h3>
          <p style="color: var(--color-text-secondary);">
            En <strong>24-72h</strong> recibir√°s tu plan nutricional personalizado con men√∫s, recetas y pautas adaptadas.
          </p>
        </div>

        <div class="card" style="text-align: center;">
          <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">3Ô∏è‚É£</div>
          <h3>Revisiones cada 21 d√≠as</h3>
          <p style="color: var(--color-text-secondary);">
            Evaluamos progresos, ajustamos el plan y resolvemos dudas. <strong>40‚Ç¨ cada revisi√≥n</strong>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Precios -->
  <section class="section" id="precios">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">Precios transparentes</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        Elige la opci√≥n que mejor se adapte a tus necesidades. Sin letra peque√±a, sin sorpresas.
      </p>

      <div class="grid grid--2" style="max-width: 900px; margin: 0 auto;">
        <PricingCard
          title="Consulta individual"
          price="50‚Ç¨"
          description="Ideal para empezar o si prefieres ir sesi√≥n por sesi√≥n."
          features={[
            "Primera consulta completa (50‚Ç¨)",
            "Plan nutricional personalizado",
            "Material de apoyo y recetas",
            "Revisiones a 40‚Ç¨ cada 21 d√≠as"
          ]}
          ctaText="Reservar primera consulta"
        />

        <PricingCard
          title="Pack 4 sesiones"
          price="140‚Ç¨"
          description="La opci√≥n m√°s elegida: compromiso y ahorro desde el inicio."
          features={[
            "Primera consulta + 3 revisiones",
            "Plan nutricional personalizado",
            "Seguimiento durante 2 meses",
            "Ahorro de 30‚Ç¨ vs pago individual"
          ]}
          highlighted={true}
          savings="30‚Ç¨"
          ctaText="Reservar pack completo"
        />
      </div>
    </div>
  </section>

  <!-- Testimonios -->
  <section class="section section--alt" id="testimonios">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">Lo que dicen mis pacientes</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        M√°s de 700 personas han confiado en m√≠ para mejorar su salud y alcanzar sus objetivos.
      </p>

      <div class="grid grid--3">
        {testimonials.map(testimonial => (
          <TestimonialCard
            quote={testimonial.quote}
            author={testimonial.author}
            service={testimonial.service}
            rating={testimonial.rating}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Sobre m√≠ -->
  <section class="section" id="sobre-mi">
    <div class="container">
      <div class="about-grid">
        <div class="about-content">
          <h2 style="margin-bottom: var(--spacing-md);">Hola, soy Mar√≠a De la Vera</h2>
          <p style="margin-bottom: var(--spacing-md);">
            Dietista-Nutricionista colegiada <strong>MAD01182</strong>, graduada en Nutrici√≥n Humana y Diet√©tica por la <strong>Universidad CEU San Pablo (2019-2023)</strong> y con M√°ster en Nutrici√≥n para la Pr√°ctica Cl√≠nica y Prevenci√≥n de Patolog√≠as por la <strong>Universidad UDIMA (2023-2025)</strong>.
          </p>
          <p style="margin-bottom: var(--spacing-md);">
            Desde 2023 he atendido a <strong>m√°s de 700 pacientes</strong> en Legan√©s y M√≥stoles, y ahora contin√∫o mi consulta en <strong>Boadilla del Monte</strong> en el Centro M√©dico Arboleda.
          </p>
          <p style="margin-bottom: var(--spacing-md);">
            Mi enfoque se basa en la <strong>educaci√≥n nutricional</strong> y planes 100% personalizados. Nada de dietas milagro ni restricciones extremas. Aprender√°s a comer bien para siempre, de forma sostenible y adaptada a tu vida real.
          </p>
          <p>
            Trabajo tanto de forma <strong>presencial</strong> en Boadilla del Monte como <strong>online</strong> por Google Meet, para que puedas elegir la modalidad que mejor te venga.
          </p>
        </div>

        <div class="about-image">
          <!-- REEMPLAZAR: Subir foto-maria-perfil.webp aqu√≠ -->
          <div class="about-image-placeholder">
            <span style="font-size: 6rem;">üë©‚Äç‚öïÔ∏è</span>
            <p style="color: var(--color-text-secondary); font-style: italic; text-align: center;">
              Foto de Mar√≠a<br>(subir imagen)
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Barrios -->
  <section class="section section--alt" id="barrios">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">Zonas de Boadilla que atiendo</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        Consulta presencial en el Centro M√©dico Arboleda, accesible desde todos los barrios de Boadilla del Monte.
      </p>

      <div class="barrios-grid">
        {barriosData.map(barrio => (
          <BarrioTag name={barrio.name} href={`/${barrio.slug}`} />
        ))}
        <BarrioTag name="Consulta online" href="/nutricionista-online" />
      </div>
    </div>
  </section>

  <!-- Reservar cita con Calendly -->
  <section class="section" id="reservar">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">Reserva tu cita</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        Elige la modalidad que prefieras: presencial en Boadilla del Monte u online por Google Meet.
      </p>

      <div class="tabs">
        <div class="tabs__buttons">
          <button class="tabs__button tabs__button--active" data-tab="presencial">
            üìç Presencial (Boadilla)
          </button>
          <button class="tabs__button" data-tab="online">
            üíª Online (Google Meet)
          </button>
        </div>

        <div class="tabs__content">
          <div class="tabs__panel tabs__panel--active" id="tab-presencial">
            <div class="calendly-inline-widget" data-url="https://calendly.com/nutricionista-mariadelavera/primera-consulta?hide_event_type_details=1&hide_gdpr_banner=1" style="min-width:320px;height:700px;"></div>
          </div>

          <div class="tabs__panel" id="tab-online">
            <div class="calendly-inline-widget" data-url="https://calendly.com/nutricionista-mariadelavera/primera-consulta-online?hide_event_type_details=1&hide_gdpr_banner=1" style="min-width:320px;height:700px;"></div>
          </div>
        </div>
      </div>

      <p class="text-center" style="margin-top: var(--spacing-lg); color: var(--color-text-secondary);">
        ¬øVienen en pareja? <a href="https://calendly.com/nutricionista-mariadelavera/primera-consulta-parejas" target="_blank" rel="noopener" style="color: var(--color-trust); font-weight: 600;">Reserva consulta para parejas aqu√≠</a>
      </p>
    </div>
  </section>

  <!-- FAQ -->
  <section class="section section--alt" id="faq">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: var(--spacing-md);">Preguntas frecuentes</h2>
      <p class="text-center" style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
        Resuelvo las dudas m√°s comunes sobre mis servicios y consultas.
      </p>

      <div style="max-width: 800px; margin: 0 auto;">
        <FAQAccordion items={faqItems} />
      </div>
    </div>
  </section>

  <!-- CTA Final -->
  <CTABox
    title="¬øListo para empezar?"
    description="Reserva tu primera consulta y da el primer paso hacia tus objetivos de salud."
    ctaText="Reservar cita ahora"
    ctaHref="/reservar"
    variant="trust"
  />

  <Footer slot="footer" />
</BaseLayout>

<script is:inline src="https://assets.calendly.com/assets/external/widget.js" async></script>

<style>
  /* Video wrapper para responsive */
  .video-wrapper {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
    max-width: 900px;
    margin: 0 auto;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
  }

  .video-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  /* About grid */
  .about-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-xl);
    align-items: center;
  }

  @media (min-width: 1024px) {
    .about-grid {
      grid-template-columns: 1.2fr 0.8fr;
    }
  }

  .about-content p {
    color: var(--color-text-secondary);
    line-height: 1.7;
  }

  .about-image-placeholder {
    width: 100%;
    max-width: 400px;
    aspect-ratio: 1;
    background: linear-gradient(135deg, #f7f3ee 0%, var(--color-accent) 100%);
    border-radius: var(--radius-lg);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-lg);
    margin: 0 auto;
  }

  /* Barrios grid */
  .barrios-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-sm);
  }

  /* Tabs */
  .tabs__buttons {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-lg);
    justify-content: center;
    flex-wrap: wrap;
  }

  .tabs__button {
    padding: 0.875rem 1.75rem;
    background-color: var(--color-white);
    border: 2px solid var(--color-bg-secondary);
    border-radius: var(--radius-full);
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary);
    cursor: pointer;
    transition: var(--transition-base);
  }

  .tabs__button:hover {
    border-color: var(--color-trust);
  }

  .tabs__button--active {
    background-color: var(--color-trust);
    color: var(--color-white);
    border-color: var(--color-trust);
  }

  .tabs__panel {
    display: none;
  }

  .tabs__panel--active {
    display: block;
  }
</style>

<script>
  // Tabs functionality
  const tabButtons = document.querySelectorAll('.tabs__button');
  const tabPanels = document.querySelectorAll('.tabs__panel');

  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      const tabId = button.getAttribute('data-tab');

      // Remove active class from all buttons and panels
      tabButtons.forEach(btn => btn.classList.remove('tabs__button--active'));
      tabPanels.forEach(panel => panel.classList.remove('tabs__panel--active'));

      // Add active class to clicked button and corresponding panel
      button.classList.add('tabs__button--active');
      document.getElementById(`tab-${tabId}`)?.classList.add('tabs__panel--active');
    });
  });
</script>
