---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import TestimonialCard from '../components/TestimonialCard.astro';
import PricingCard from '../components/PricingCard.astro';
import FAQAccordion from '../components/FAQAccordion.astro';
import CTABox from '../components/CTABox.astro';
import CalendlySection from '../components/CalendlySection.astro';
import ValueProposition from '../components/ValueProposition.astro';
import MaterialFormativo from '../components/MaterialFormativo.astro';
import BarrioTag from '../components/BarrioTag.astro';
import ServiceCard from '../components/ServiceCard.astro';
import TrustStrip from '../components/TrustStrip.astro';
import barriosData from '../data/barrios.json';
import serviciosData from '../data/servicios.json';

const faqItems = [
  {
    question: "¿Qué se hace en la primera consulta?",
    answer: "En la primera consulta hacemos una entrevista completa sobre tu historial médico, hábitos alimenticios, objetivos y preferencias. Analizamos tu composición corporal y diseñamos una estrategia personalizada. Recibirás tu plan nutricional en 24-72h."
  },
  {
    question: "¿Qué se hace en las revisiones?",
    answer: "Evaluamos tu progreso, ajustamos el plan según tus resultados y resolvemos dudas. Las revisiones son clave para mantener la motivación y adaptar la estrategia a tu evolución."
  },
  {
    question: "¿Cada cuánto se hacen las revisiones?",
    answer: "Recomiendo revisiones cada 21 días para un seguimiento óptimo. Este intervalo permite ver cambios significativos y hacer ajustes efectivos sin perder el ritmo."
  },
  {
    question: "¿Trabajas con personas veganas o vegetarianas?",
    answer: "Sí, adapto los planes a cualquier patrón alimentario: vegano, vegetariano, flexitariano, etc. Lo importante es que el plan sea equilibrado y cubra todas tus necesidades nutricionales."
  },
  {
    question: "¿Cómo son los planes que mandas?",
    answer: "Planes 100% personalizados con menús semanales, recetas detalladas, lista de la compra y material educativo. Todo adaptado a tus gustos, horarios y objetivos. Nada de planes genéricos."
  },
  {
    question: "¿Necesito tomar algún tipo de suplemento?",
    answer: "Depende de cada caso. Primero valoro tu alimentación y analíticas. Solo recomiendo suplementación cuando es realmente necesaria y está justificada. La base siempre es la comida real."
  }
];

const testimonials = [
  {
    quote: "María es una profesional excepcional. Desde el primer momento me sentí muy cómoda y en confianza. Me ha ayudado a mejorar mi relación con la comida y a entender mejor mi cuerpo. Sus planes son muy personalizados y fáciles de seguir.",
    author: "Lucía García",
    rating: 5
  },
  {
    quote: "Llevo varios meses con María y estoy encantada. Ha sabido adaptarse perfectamente a mis necesidades y objetivos. Los menús son variados, ricos y nada aburridos. Además, el material educativo que proporciona es genial.",
    author: "Ana Martínez",
    rating: 5
  },
  {
    quote: "Muy contenta con el seguimiento de María. Es muy cercana, resuelve todas mis dudas por WhatsApp y las revisiones son muy completas. He notado un cambio enorme tanto físico como en energía.",
    author: "Carmen López",
    rating: 5
  },
  {
    quote: "María es una gran profesional. Me ayudó mucho con mis problemas digestivos. Después de años sin encontrar solución, con su plan personalizado he mejorado muchísimo.",
    author: "Pedro Sánchez",
    rating: 5
  },
  {
    quote: "Fui a María buscando perder peso y no solo lo conseguí, sino que aprendí a comer de verdad. Nunca me he sentido a dieta. Sus recetas son riquísimas y los menús súper prácticos.",
    author: "Marta Fernández",
    rating: 5
  },
  {
    quote: "Excelente profesional. María se toma el tiempo de conocerte, entender tu estilo de vida y adaptar todo a ti. No es un plan genérico, de verdad se nota que está hecho a medida.",
    author: "Javier Ruiz",
    rating: 5
  },
  {
    quote: "Acudí a María por recomendación y ha sido un acierto total. Me ha enseñado a organizar mis comidas, a hacer la compra de forma inteligente y a disfrutar comiendo sano.",
    author: "Isabel Torres",
    rating: 5
  },
  {
    quote: "María me ha ayudado con la nutrición deportiva y los resultados han sido increíbles. Ha adaptado mi alimentación a mis entrenamientos y competiciones. Mi rendimiento ha mejorado notablemente.",
    author: "David Moreno",
    rating: 5
  },
  {
    quote: "Después de probar con varios nutricionistas, encontré a María y por fin siento que estoy en buenas manos. Su enfoque es diferente: no se trata solo de perder peso, sino de aprender y cambiar hábitos.",
    author: "Sara Jiménez",
    rating: 5
  }
];

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqItems.map(item => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer
    }
  }))
};
---

<BaseLayout
  title="Nutricionista en Boadilla del Monte | María De la Vera · Colegiada MAD01182"
  description="Nutricionista colegiada en Boadilla del Monte. Pérdida de peso, nutrición deportiva, salud digestiva y hormonal. Consulta presencial en Centro Médico Arboleda y online. Primera consulta 50€."
  schema={faqSchema}
>
  <Nav slot="nav" />

  <!-- 1. Hero -->
  <Hero
    name="María De la Vera"
    role="Nutricionista"
    location="Boadilla del Monte"
    description="Con más de 700 pacientes atendidos, ayudo a personas como tú a alcanzar su mejor versión a través de la nutrición. Consulta presencial en Centro Médico Arboleda o modalidad online. Sin dietas milagro, solo educación nutricional y planes 100% personalizados."
    benefits={[
      { emoji: "\uD83C\uDF93", text: "Colegiada MAD01182" },
      { emoji: "\u2B50", text: "5.0 en Google" },
      { emoji: "\uD83D\uDC65", text: "+700 pacientes" },
      { emoji: "\uD83D\uDCCD", text: "Centro Médico Arboleda" }
    ]}
  />

  <!-- Trust Strip -->
  <TrustStrip />

  <!-- 2. Servicios -->
  <section class="section" id="servicios">
    <div class="container">
      <h2 class="section-title">Principales Servicios</h2>
      <p class="section-sub">Consultas personalizadas de nutrición y dietética, presenciales y online.</p>

      <div class="servicios-grid">
        {serviciosData.map(servicio => (
          <ServiceCard
            emoji={servicio.emoji}
            title={servicio.title}
            description={servicio.shortDesc}
            href={`/${servicio.slug}`}
          />
        ))}
        <ServiceCard
          emoji="\uD83D\uDCBB"
          title="Consulta online"
          description="Misma calidad desde cualquier lugar de España, por Google Meet"
          href="/nutricionista-online"
        />
      </div>
    </div>
  </section>

  <!-- 3. Proceso / Cómo funciona -->
  <section class="section" id="proceso">
    <div class="container">
      <h2 class="section-title">¿Cómo es el proceso?</h2>

      <div class="proceso-grid">
        <div class="proceso-card">
          <div class="proceso-num">1</div>
          <h3>Primera consulta</h3>
          <p>Nos conocemos en persona o por videollamada. Hago una <strong>entrevista completa</strong> sobre tu historial médico, hábitos alimenticios, rutina diaria, gustos y objetivos. Realizamos un <strong>análisis de composición corporal</strong>.</p>
        </div>

        <div class="proceso-card">
          <div class="proceso-num">2</div>
          <h3>Tu plan en 24-72h</h3>
          <p>Diseño un <strong>plan nutricional 100% personalizado</strong>: menús semanales adaptados a tus horarios, recetas fáciles y lista de la compra organizada. Además recibirás <strong>material educativo</strong>.</p>
        </div>

        <div class="proceso-card">
          <div class="proceso-num">3</div>
          <h3>Revisiones cada 21 días</h3>
          <p>Nos vemos cada 3 semanas para <strong>evaluar tu progreso</strong>, resolver dudas y ajustar el plan según tus resultados. Este intervalo permite ver <strong>cambios reales</strong> y hacer ajustes efectivos.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Proof Bar -->
  <div class="proof-bar">
    <span class="proof-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</span> Más de 700 historias de cambio, crecimiento y superación personal.
  </div>

  <!-- 4. Precios -->
  <section class="section" id="precios">
    <div class="container">
      <h2 class="section-title">Precios</h2>
      <p class="section-sub">Elige la opción que mejor se adapte a ti.</p>

      <div class="grid grid--2" style="max-width: 800px; margin: 0 auto;">
        <PricingCard
          title="Pago por sesión"
          price="50€"
          description="Terapia nutricional individual"
          features={[
            "Primera consulta completa · 60 min",
            "Revisiones a 40€ · cada 21 días",
            "Plan nutricional personalizado",
            "Flexibilidad horaria"
          ]}
          ctaText="PEDIR CITA"
        />

        <PricingCard
          title="Pack 4 sesiones"
          price="140€"
          description="Ahorra contratando tu bono"
          features={[
            "Incluye 4 sesiones completas",
            "Pago único al contratar el bono",
            "Plan nutricional personalizado",
            "Seguimiento durante 2 meses"
          ]}
          highlighted={true}
          savings="30€"
          ctaText="PEDIR CITA"
        />
      </div>
    </div>
  </section>

  <!-- 5. Ubicación / Contacto -->
  <section class="section">
    <div class="container">
      <h2 class="section-title">¿Dónde pasamos consulta?</h2>
      <div style="height: 32px;"></div>

      <div class="ubicacion-grid">
        <div class="ubicacion-info">
          <div><strong>Dirección:</strong> Av. Siglo XXI, 13, local 13/14, Centro Médico Arboleda, 28660, Boadilla del Monte, Madrid</div>
          <div><strong>Teléfono:</strong> +34 611 43 86 79</div>
          <div><strong>Horarios:</strong> De Lunes a Viernes de 10:00 a 14:00 y de 16:00 a 20:00</div>
          <a href="tel:+34611438679" class="btn-call">Llamar al 611 43 86 79</a>
        </div>
        <div class="ubicacion-map">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3041.8!2d-3.8777!3d40.4021!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd418ff572a44c05%3A0x4936e78853ca7fde!2sCentro+M%C3%A9dico+Arboleda!5e0!3m2!1ses!2ses!4v1700000000000!5m2!1ses!2ses" allowfullscreen loading="lazy" title="Ubicación Centro Médico Arboleda — Boadilla del Monte"></iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- 6. Reservar cita con Calendly -->
  <CalendlySection />

  <!-- 7. ¿Por qué elegir mi consulta? -->
  <section class="section">
    <div class="container">
      <h2 class="section-title">¿Por qué elegir mi consulta?</h2>
      <p class="section-sub">Profesionalidad, cercanía y resultados reales.</p>
      <ValueProposition />
    </div>
  </section>

  <!-- 8. FAQ -->
  <section class="section" id="faq">
    <div class="container">
      <h2 class="section-title">Preguntas frecuentes</h2>
      <p class="section-sub">¿Tienes alguna duda? Puede que esta sección despeje alguna de ellas.</p>
      <FAQAccordion items={faqItems} />
    </div>
  </section>

  <!-- 9. Testimonios -->
  <section class="section" id="testimonios">
    <div class="container">
      <div style="text-align:center;margin-bottom:8px;font-size:2em;">&#129504;</div>
      <div style="text-align:center;margin-bottom:8px;"><span class="proof-stars" style="font-size:1.3em;">&#9733;&#9733;&#9733;&#9733;&#9733;</span></div>
      <h2 class="section-title">Lo que dicen mis pacientes</h2>
      <p class="section-sub">Más de 700 pacientes han transformado su relación con la comida.</p>

      <div class="resenas-grid">
        {testimonials.map(testimonial => (
          <TestimonialCard
            quote={testimonial.quote}
            author={testimonial.author}
            rating={testimonial.rating}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- 10. Sobre mí -->
  <section class="section" id="sobre-mi">
    <div class="container">
      <h2 class="section-title">Conoce a tu nutricionista</h2>
      <p class="section-sub">Profesional colegiada, especializada y comprometida con tu bienestar.</p>

      <div class="equipo-cards">
        <div class="equipo-psi-card">
          <div class="equipo-psi-foto">
            <img src="/2025-10-04.webp" alt="María De la Vera López — Nutricionista colegiada MAD01182 en Boadilla del Monte" loading="lazy" width="100" height="100" decoding="async" />
          </div>
          <div class="equipo-psi-info">
            <h3>María De la Vera López</h3>
            <span class="equipo-psi-role">Dietista-Nutricionista · Col. MAD01182</span>
            <p>Dietista-Nutricionista colegiada con experiencia en diversas patologías: <strong>sobrepeso y obesidad, diabetes, hipotiroidismo, síndrome de ovario poliquístico, SIBO</strong> y nutrición deportiva.</p>
            <p>Graduada en <strong>Nutrición Humana y Dietética</strong> por la Universidad CEU San Pablo y con <strong>Máster en Nutrición Clínica</strong> por la Universidad UDIMA. Con experiencia en clínica privada realizando dietas personalizadas y evaluación del estado nutricional de cada paciente.</p>
            <p>Apasionada de la nutrición, cuidar de la salud de las personas y ayudarlas a alcanzar sus objetivos es mi mayor motivación. Más de <strong>700 pacientes atendidos</strong> desde 2023.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 11. Material formativo -->
  <section class="section" id="material-formativo">
    <div class="container">
      <h2 class="section-title">Material formativo incluido</h2>
      <p class="section-sub">Todos mis pacientes reciben material educativo de calidad.</p>
      <MaterialFormativo />
    </div>
  </section>

  <!-- 12. Barrios -->
  <section class="section" id="barrios">
    <div class="container">
      <h2 class="section-title">Zonas de Boadilla</h2>
      <div style="height: 16px;"></div>
      <div class="barrios-grid">
        {barriosData.map(barrio => (
          <BarrioTag name={barrio.name} href={`/${barrio.slug}`} />
        ))}
        <BarrioTag name="Consulta online" href="/nutricionista-online" />
      </div>
    </div>
  </section>

  <!-- 13. CTA Final -->
  <CTABox
    title="¿Damos el primer paso?"
    description="Reserva tu primera consulta y da el primer paso hacia tus objetivos de salud. Tu bienestar no puede esperar."
    ctaText="Reservar cita ahora"
    ctaHref="#reservar"
    variant="trust"
  />

  <Footer slot="footer" />
</BaseLayout>

<style>
  /* Servicios grid */
  .servicios-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  @media (max-width: 900px) {
    .servicios-grid {
      grid-template-columns: 1fr;
      gap: 8px;
    }
  }

  /* Proceso cards */
  .proceso-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  @media (max-width: 900px) {
    .proceso-grid {
      grid-template-columns: 1fr;
      gap: 14px;
    }
  }

  .proceso-card {
    background: var(--white);
    border-radius: var(--radius);
    padding: 28px 24px;
    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04);
  }

  .proceso-num {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: var(--gold-light);
    color: var(--gold);
    font-weight: 800;
    font-size: 0.95em;
    margin-bottom: 14px;
  }

  .proceso-card h3 {
    font-size: 0.95em;
    font-weight: 600;
    margin-bottom: 10px;
    font-family: var(--font-body);
  }

  .proceso-card p {
    font-size: 0.88em;
    color: var(--text-light);
    line-height: 1.6;
  }

  @media (max-width: 900px) {
    .proceso-card {
      padding: 20px 18px;
    }

    .proceso-card h3 {
      font-size: 0.9em;
    }

    .proceso-card p {
      font-size: 0.88em;
    }
  }

  /* Ubicación */
  .ubicacion-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  .ubicacion-info {
    display: flex;
    flex-direction: column;
    gap: 14px;
    font-size: 0.95em;
  }

  .ubicacion-info strong {
    color: var(--text);
  }

  .ubicacion-map {
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  .ubicacion-map iframe {
    width: 100%;
    height: 300px;
    border: none;
  }

  .btn-call {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 14px 32px;
    background: var(--gold-light);
    border-radius: 100px;
    font-weight: 700;
    font-size: 0.92em;
    color: var(--text);
    transition: all 0.2s;
    margin-top: 8px;
    text-decoration: none;
    width: fit-content;
  }

  .btn-call:hover {
    background: var(--gold);
    color: var(--white);
  }

  @media (max-width: 900px) {
    .ubicacion-grid {
      grid-template-columns: 1fr;
      gap: 20px;
    }

    .ubicacion-info {
      font-size: 0.85em;
      gap: 10px;
    }

    .btn-call {
      padding: 12px 24px;
      font-size: 0.85em;
    }

    .ubicacion-map iframe {
      height: 220px;
    }
  }

  /* Reseñas grid - 3 columnas */
  .resenas-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }

  @media (max-width: 900px) {
    .resenas-grid {
      grid-template-columns: 1fr;
      gap: 12px;
    }
  }

  /* Equipo cards */
  .equipo-cards {
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 800px;
    margin: 0 auto;
  }

  .equipo-psi-card {
    display: flex;
    gap: 24px;
    align-items: center;
    background: var(--white);
    border-radius: var(--radius);
    padding: 28px;
    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04);
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .equipo-psi-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 28px rgba(0, 0, 0, 0.08);
  }

  .equipo-psi-foto {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid var(--gold-light);
    flex-shrink: 0;
  }

  .equipo-psi-foto img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
  }

  .equipo-psi-info {
    flex: 1;
  }

  .equipo-psi-info h3 {
    font-family: var(--font-display);
    font-size: 1.15em;
    font-weight: 400;
    margin-bottom: 4px;
  }

  .equipo-psi-role {
    font-size: 0.82em;
    color: var(--green-dark);
    font-weight: 600;
    display: block;
    margin-bottom: 10px;
  }

  .equipo-psi-info p {
    font-size: 0.88em;
    color: var(--text-light);
    line-height: 1.6;
    margin-bottom: 0;
  }

  @media (max-width: 900px) {
    .equipo-psi-card {
      flex-direction: column;
      text-align: center;
      padding: 22px 18px;
      gap: 14px;
    }

    .equipo-psi-foto {
      width: 80px;
      height: 80px;
    }

    .equipo-psi-info h3 {
      font-size: 1.05em;
    }

    .equipo-psi-role {
      font-size: 0.85em;
    }

    .equipo-psi-info p {
      font-size: 0.9em;
    }
  }
</style>
